(function(a){if(typeof define==="function"&&define.amd){define(["zepto"],a)}else{a(Zepto)}}(function(a){a.keyboard=(function(){var b,l,e,h=false,c=a.noop,d=a.noop,k=a.noop,g="";var f={init:function(m){if(h){return f}e=a.extend({maxLength:10},m);var n="";n+='<table class="keyboard">';n+='<tr class="row">';n+='<td class="key" data-key="1">1</td>';n+='<td class="key" data-key="2">2</td>';n+='<td class="key" data-key="3">3</td>';n+='<td class="key backspace" data-key="bac"></td>';n+="</tr>";n+='<tr class="row">';n+='<td class="key" data-key="4">4</td>';n+='<td class="key" data-key="5">5</td>';n+='<td class="key" data-key="6">6</td>';n+='<td class="key pay off" rowspan="3" data-key="pay"><br/>支 付</td>';n+="</tr>";n+='<tr class="row">';n+='<td class="key" data-key="7">7</td>';n+='<td class="key" data-key="8">8</td>';n+='<td class="key" data-key="9">9</td>';n+="</tr>";n+='<tr class="row">';n+='<td class="key return" data-key="ret"></td>';n+='<td class="key" data-key="0">0</td>';n+='<td class="key" data-key=".">.</td>';n+="</tr>";n+="</table>";b=a(n).appendTo("body");l=a(".pay",b);b.on("tap",".key",function(){var q=a(this),p=q.attr("data-key");if(q.hasClass("off")){return}if(p=="pay"){c()}else{if(p=="ret"){f.hide();d()}else{if(p=="bac"){if(g.length>0){g=g.substr(0,g.length-1);k(g);j(g)}}else{if(g.length<e.maxLength){var o=g+p;if(!i(o)){return}g+=p;j(g);k(g)}}}}});h=true;return f},show:function(){if(!h){this.init()}if(!b.hasClass("on")){b.addClass("on")}return f},hide:function(){if(!h){return}b.removeClass("on");return f},val:function(m){if(arguments.length>0){g=m+"";return f}else{return g}},onPay:function(m){c=m;return f},onReturn:function(m){d=m;return f},onChange:function(m){k=m;return f}};return f;function j(m){if(/^(\d|([1-9]\d+))(.\d{1,2})?$/.test(m)){l.removeClass("off")}else{l.addClass("off")}}function i(p){var o,m,q,r;if(p.length>0){if(p[0]=="."){return false}q=false;r=0;for(o=0,m=p.length;o<m;o++){if(p[o]=="."){if(q){return false}else{q=true}}else{if(q){if(r>1){return false}else{r++}}}}}return true}})()}));